# HTTP åè®®

HTTP åè®®æ˜¯ä¸ªæ— çŠ¶æ€åè®®ï¼Œä¸ä¼šä¿å­˜çŠ¶æ€ã€‚

## HTTP æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ

- HTTP1.0 å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POST å’Œ HEAD æ–¹æ³•
- HTTP1.1 æ–°å¢žäº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACE å’Œ CONNECT

## è¿™äº›æ–¹æ³•çš„å…·ä½“ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

- GET: é€šå¸¸ç”¨äºŽè¯·æ±‚æœåŠ¡å™¨å‘é€æŸäº›èµ„æº
- HEAD: è¯·æ±‚èµ„æºçš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™äº›å¤´éƒ¨ä¸Ž HTTP GET æ–¹æ³•è¯·æ±‚æ—¶è¿”å›žçš„ä¸€è‡´ã€‚è¯¥è¯·æ±‚æ–¹æ³•çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯åœ¨ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶å‰å…ˆèŽ·å–å…¶å¤§å°å†å†³å®šæ˜¯å¦è¦ä¸‹è½½ï¼Œä»¥æ­¤å¯ä»¥èŠ‚çº¦å¸¦å®½èµ„æº
- OPTIONS: ç”¨äºŽèŽ·å–ç›®çš„èµ„æºæ‰€æ”¯æŒçš„é€šä¿¡é€‰é¡¹
- POST: å‘é€æ•°æ®ç»™æœåŠ¡å™¨
- PUT: ç”¨äºŽæ–°å¢žèµ„æºæˆ–è€…ä½¿ç”¨è¯·æ±‚ä¸­çš„æœ‰æ•ˆè´Ÿè½½æ›¿æ¢ç›®æ ‡èµ„æºçš„è¡¨çŽ°å½¢å¼
- DELETE: ç”¨äºŽåˆ é™¤æŒ‡å®šçš„èµ„æº
- PATCH: ç”¨äºŽå¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹
- CONNECT: HTTP/1.1 åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿žæŽ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨
- TRACE: å›žæ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºŽæµ‹è¯•æˆ–è¯Šæ–­

## GET å’Œ POST æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸðŸŒŸ

- **æ•°æ®ä¼ è¾“æ–¹å¼ä¸åŒï¼š** GET è¯·æ±‚é€šè¿‡ URL ä¼ è¾“æ•°æ®ï¼Œè€Œ POST çš„æ•°æ®é€šè¿‡è¯·æ±‚ä½“ä¼ è¾“ã€‚
> URL æœ‰é•¿åº¦é™åˆ¶ï¼Œä¼šå½±å“ Get è¯·æ±‚ï¼Œä½†æ˜¯è¿™ä¸ªé•¿åº¦é™åˆ¶æ˜¯æµè§ˆå™¨è§„å®šçš„ï¼Œä¸æ˜¯ RFC è§„å®šçš„ã€‚Post å¯ä»¥é€šè¿‡ request body æ¥ä¼ è¾“æ¯” Get æ›´å¤šçš„æ•°æ®ã€‚
- **å®‰å…¨æ€§ä¸åŒï¼š** POST çš„æ•°æ®å› ä¸ºåœ¨è¯·æ±‚ä¸»ä½“å†…ï¼Œæ‰€ä»¥æœ‰ä¸€å®šçš„å®‰å…¨æ€§ä¿è¯ï¼Œè€Œ GET çš„æ•°æ®åœ¨ URL ä¸­ï¼Œé€šè¿‡åŽ†å²è®°å½•ï¼Œç¼“å­˜å¾ˆå®¹æ˜“æŸ¥åˆ°æ•°æ®ä¿¡æ¯ã€‚
> Post ç›¸å¯¹ Get å®‰å…¨ä¸€ç‚¹ç‚¹ è™½ç„¶ Get è¯·æ±‚èƒ½è¢«ç¼“å­˜ï¼ŒPost ä¸èƒ½ã€‚ä½†æ˜¯åœ¨æŠ“åŒ…çš„æƒ…å†µä¸‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚
- **æ•°æ®ç±»åž‹ä¸åŒï¼š** GET åªå…è®¸ ASCII å­—ç¬¦ï¼Œè€Œ POST å¯¹æ•°æ®ç±»åž‹ä¸åšé™åˆ¶ï¼Œæ‰€ä»¥æ”¯æŒæ›´å¤šçš„ç¼–ç ç±»åž‹ã€‚
- **GET æ— å®³ï¼š** åˆ·æ–°ã€åŽé€€ç­‰æµè§ˆå™¨æ“ä½œ GET è¯·æ±‚æ˜¯æ— å®³çš„ï¼ŒPOST å¯èƒ½é‡å¤æäº¤è¡¨å•
- **ç‰¹æ€§ä¸åŒï¼š** GET æ˜¯å®‰å…¨ï¼ˆè¿™é‡Œçš„å®‰å…¨æ˜¯æŒ‡åªè¯»ç‰¹æ€§ï¼Œå°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¸ä¼šå¼•èµ·æœåŠ¡å™¨çŠ¶æ€å˜åŒ–ï¼‰ä¸”å¹‚ç­‰ï¼ˆå¹‚ç­‰çš„æ¦‚å¿µæ˜¯æŒ‡åŒä¸€ä¸ªè¯·æ±‚æ–¹æ³•æ‰§è¡Œå¤šæ¬¡å’Œä»…æ‰§è¡Œä¸€æ¬¡çš„æ•ˆæžœå®Œå…¨ç›¸åŒï¼‰ï¼Œè€Œ POST æ˜¯éžå®‰å…¨éžå¹‚ç­‰

### å‰¯ä½œç”¨å’Œå¹‚ç­‰çš„æ¦‚å¿µï¼š

- å‰¯ä½œç”¨æŒ‡å¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºåšæ”¹å˜ï¼Œæœç´¢æ˜¯æ— å‰¯ä½œç”¨çš„ï¼Œæ³¨å†Œæ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚

- å¹‚ç­‰æŒ‡å‘é€ M å’Œ N æ¬¡è¯·æ±‚ï¼ˆä¸¤è€…ä¸ç›¸åŒä¸”éƒ½å¤§äºŽ 1ï¼‰ï¼ŒæœåŠ¡å™¨ä¸Šèµ„æºçš„çŠ¶æ€ä¸€è‡´ï¼Œæ¯”å¦‚æ³¨å†Œ 10 ä¸ªå’Œ 11 ä¸ªå¸å·æ˜¯ä¸å¹‚ç­‰çš„ï¼Œå¯¹æ–‡ç« è¿›è¡Œæ›´æ”¹ 10 æ¬¡å’Œ 11 æ¬¡æ˜¯å¹‚ç­‰çš„ã€‚

> åœ¨è§„èŒƒçš„åº”ç”¨åœºæ™¯ä¸Šè¯´ï¼ŒGet å¤šç”¨äºŽæ— å‰¯ä½œç”¨ï¼Œå¹‚ç­‰çš„åœºæ™¯ï¼Œä¾‹å¦‚æœç´¢å…³é”®å­—ã€‚
> 
> Post å¤šç”¨äºŽå‰¯ä½œç”¨ï¼Œä¸å¹‚ç­‰çš„åœºæ™¯ï¼Œä¾‹å¦‚æ³¨å†Œã€‚

**PUT å’Œ POST éƒ½æ˜¯ç»™æœåŠ¡å™¨å‘é€æ–°å¢žèµ„æºï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

PUT å’Œ POST æ–¹æ³•çš„åŒºåˆ«æ˜¯ï¼ŒPUT æ–¹æ³•æ˜¯å¹‚ç­‰çš„ï¼šè¿žç»­è°ƒç”¨ä¸€æ¬¡æˆ–è€…å¤šæ¬¡çš„æ•ˆæžœç›¸åŒï¼ˆæ— å‰¯ä½œç”¨ï¼‰ï¼Œè€Œ POST æ–¹æ³•æ˜¯éžå¹‚ç­‰çš„ã€‚

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒPUT çš„ URI æŒ‡å‘æ˜¯å…·ä½“å•ä¸€èµ„æºï¼Œè€Œ POST å¯ä»¥æŒ‡å‘èµ„æºé›†åˆã€‚

ä¸¾ä¸ªðŸŒ°ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œå½“æˆ‘ä»¬è¦åˆ›å»ºä¸€ç¯‡æ–‡ç« çš„æ—¶å€™å¾€å¾€ç”¨ POST è¯·æ±‚`https://www.juejin.com/articles`ï¼Œè¿™ä¸ªè¯·æ±‚çš„è¯­ä¹‰æ˜¯ï¼Œåœ¨ articles çš„èµ„æºé›†åˆä¸‹åˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ï¼Œå¦‚æžœæˆ‘ä»¬å¤šæ¬¡æäº¤è¿™ä¸ªè¯·æ±‚ä¼šåˆ›å»ºå¤šä¸ªæ–‡ç« ï¼Œè¿™æ˜¯éžå¹‚ç­‰çš„ã€‚

è€Œ PUT è¯·æ±‚`https://www.juejin.com/articles/123`çš„è¯­ä¹‰æ˜¯æ›´æ–°å¯¹åº”æ–‡ç« çš„å†…å®¹ï¼ˆæ¯”å¦‚ä¿®æ”¹ä½œè€…åç§°ç­‰ï¼‰ï¼Œè¿™ä¸ª URI æŒ‡å‘çš„å°±æ˜¯å•ä¸€èµ„æºï¼Œè€Œä¸”æ˜¯å¹‚ç­‰çš„ï¼Œæ¯”å¦‚ä½ æŠŠã€ŽXXXã€ä¿®æ”¹æˆã€Žè”¡å¾å¤ã€ï¼Œæäº¤å¤šå°‘æ¬¡éƒ½æ˜¯ä¿®æ”¹æˆã€Žè”¡å¾å¤ã€

> ps: ã€ŽPOST è¡¨ç¤ºåˆ›å»ºèµ„æºï¼ŒPUT è¡¨ç¤ºæ›´æ–°èµ„æºã€è¿™ç§è¯´æ³•æ˜¯é”™è¯¯çš„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½èƒ½åˆ›å»ºèµ„æºï¼Œæ ¹æœ¬åŒºåˆ«åœ¨äºŽå¹‚ç­‰æ€§

**PUT å’Œ PATCH éƒ½æ˜¯ç»™æœåŠ¡å™¨å‘é€ä¿®æ”¹èµ„æºï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

PUT å’Œ PATCH éƒ½æ˜¯æ›´æ–°èµ„æºï¼Œè€Œ PATCH ç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚

## HTTP çš„éƒ¨é¦–æœ‰å“ªäº›ï¼Ÿ

> ç”¨ typroa ç¼–è¾‘æ›´æ–°

## http çš„è¯·æ±‚æŠ¥æ–‡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ

è¯·æ±‚æŠ¥æ–‡æœ‰ 4 éƒ¨åˆ†ç»„æˆï¼š

è¯·æ±‚è¡Œ
è¯·æ±‚å¤´éƒ¨
ç©ºè¡Œ
è¯·æ±‚ä½“

## å¸¸è§çŠ¶æ€ç 

**2XX æˆåŠŸ**

- 200 OKï¼Œè¡¨ç¤ºä»Žå®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®å¤„ç† âœ¨
- 201 Created è¯·æ±‚å·²ç»è¢«å®žçŽ°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œå»ºç«‹
- 202 Accepted è¯·æ±‚å·²æŽ¥å—ï¼Œä½†æ˜¯è¿˜æ²¡æ‰§è¡Œï¼Œä¸ä¿è¯å®Œæˆè¯·æ±‚
- 204 No contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†å“åº”æŠ¥æ–‡ä¸å«å®žä½“çš„ä¸»ä½“éƒ¨åˆ†
- 205 Reset Contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†å“åº”æŠ¥æ–‡ä¸å«å®žä½“çš„ä¸»ä½“éƒ¨åˆ†ï¼Œä½†æ˜¯ä¸Ž 204 å“åº”ä¸åŒåœ¨äºŽè¦æ±‚è¯·æ±‚æ–¹é‡ç½®å†…å®¹
- 206 Partial Contentï¼Œè¿›è¡ŒèŒƒå›´è¯·æ±‚ âœ¨

**3XX é‡å®šå‘**

- 301 moved permanentlyï¼Œæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URL
- 302 foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„ URL âœ¨
- 303 see otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•èŽ·å–èµ„æº
- 304 not modifiedï¼Œè¡¨ç¤ºæœåŠ¡å™¨å…è®¸è®¿é—®èµ„æºï¼Œä½†å› å‘ç”Ÿè¯·æ±‚æœªæ»¡è¶³æ¡ä»¶çš„æƒ…å†µ
- 307 temporary redirectï¼Œä¸´æ—¶é‡å®šå‘ï¼Œå’Œ 302 å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯æœŸæœ›å®¢æˆ·ç«¯ä¿æŒè¯·æ±‚æ–¹æ³•ä¸å˜å‘æ–°çš„åœ°å€å‘å‡ºè¯·æ±‚

> **åŒæ ·æ˜¯é‡å®šå‘ 302ï¼Œ303ï¼Œ307 çš„åŒºåˆ«ï¼Ÿ**
> 
> 302 æ˜¯ http1.0 çš„åè®®çŠ¶æ€ç ï¼Œåœ¨ http1.1 ç‰ˆæœ¬çš„æ—¶å€™ä¸ºäº†ç»†åŒ– 302 çŠ¶æ€ç åˆå‡ºæ¥äº†ä¸¤ä¸ª 303 å’Œ 307ã€‚
>
> 303 æ˜Žç¡®è¡¨ç¤ºå®¢æˆ·ç«¯åº”å½“é‡‡ç”¨ get æ–¹æ³•èŽ·å–èµ„æºï¼Œä»–ä¼šæŠŠ POST è¯·æ±‚å˜ä¸º GET è¯·æ±‚è¿›è¡Œé‡å®šå‘ã€‚ 307 ä¼šéµç…§æµè§ˆå™¨æ ‡å‡†ï¼Œä¸ä¼šä»Ž post å˜ä¸º getã€‚

**4XX å®¢æˆ·ç«¯é”™è¯¯**

- 400 bad requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯ âœ¨
- 401 unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ âœ¨
- 403 forbiddenï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç» âœ¨
- 404 not foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æº âœ¨
- 408 Request timeout, å®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶
- 409 Confict, è¯·æ±‚çš„èµ„æºå¯èƒ½å¼•èµ·å†²çª

**5XX æœåŠ¡å™¨é”™è¯¯**

- 500 internal sever errorï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ âœ¨
- 501 Not Implemented è¯·æ±‚è¶…å‡ºæœåŠ¡å™¨èƒ½åŠ›èŒƒå›´ï¼Œä¾‹å¦‚æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ï¼Œæˆ–è€…è¯·æ±‚æ˜¯æœåŠ¡å™¨ä¸æ”¯æŒçš„æŸä¸ªæ–¹æ³•
- 503 service unavailableï¼Œè¡¨æ˜ŽæœåŠ¡å™¨æš‚æ—¶å¤„äºŽè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚
- 505 http version not supported æœåŠ¡å™¨ä¸æ”¯æŒï¼Œæˆ–è€…æ‹’ç»æ”¯æŒåœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„ HTTP ç‰ˆæœ¬

> [å¸¸è§ HTTP çŠ¶æ€ç å«ä¹‰](https://sunburst.wang/posts/2018/02/12/common-http-status-code.html)

## keep-alive æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ

åœ¨æ—©æœŸçš„ HTTP/1.0 ä¸­ï¼Œæ¯æ¬¡ http è¯·æ±‚éƒ½è¦åˆ›å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œè€Œåˆ›å»ºè¿žæŽ¥çš„è¿‡ç¨‹éœ€è¦æ¶ˆè€—èµ„æºå’Œæ—¶é—´ï¼Œä¸ºäº†å‡å°‘èµ„æºæ¶ˆè€—ï¼Œç¼©çŸ­å“åº”æ—¶é—´ï¼Œå°±éœ€è¦é‡ç”¨è¿žæŽ¥ã€‚åœ¨åŽæ¥çš„ HTTP/1.0 ä¸­ä»¥åŠ HTTP/1.1 ä¸­ï¼Œå¼•å…¥äº†é‡ç”¨è¿žæŽ¥çš„æœºåˆ¶ï¼Œå¦‚æžœæƒ³è¦ä¿æŒé•¿è¿žæŽ¥ï¼Œå°±éœ€è¦åœ¨ http è¯·æ±‚å¤´ä¸­åŠ å…¥`Connection: keep-alive`æ¥å‘Šè¯‰å¯¹æ–¹è¿™ä¸ªè¯·æ±‚å“åº”å®ŒæˆåŽä¸è¦å…³é—­ï¼Œä¸‹ä¸€æ¬¡å’±ä»¬è¿˜ç”¨è¿™ä¸ªè¯·æ±‚ç»§ç»­äº¤æµã€‚

**keep-alive çš„ä¼˜ç‚¹ï¼š**

- è¾ƒå°‘çš„ CPU å’Œå†…å­˜çš„ä½¿ç”¨ï¼ˆç”±äºŽåŒæ—¶æ‰“å¼€çš„è¿žæŽ¥çš„å‡å°‘äº†ï¼‰
- å…è®¸è¯·æ±‚å’Œåº”ç­”çš„ HTTP ç®¡çº¿åŒ–
- é™ä½Žæ‹¥å¡žæŽ§åˆ¶ ï¼ˆTCP è¿žæŽ¥å‡å°‘äº†ï¼‰
- å‡å°‘äº†åŽç»­è¯·æ±‚çš„å»¶è¿Ÿï¼ˆæ— éœ€å†è¿›è¡Œæ¡æ‰‹ï¼‰
- æŠ¥å‘Šé”™è¯¯æ— éœ€å…³é—­ TCP è¿žæŽ¥

## HTTP çš„ç¼“å­˜çš„è¿‡ç¨‹æ˜¯æ€Žæ ·çš„ï¼ŸðŸŒŸ

> todo 
